
<head th:replace="fragments_others_head" :: head></head>

<body>
	<div id="layout-wrapper">

		<div th:replace="fragments_others_header" :: header></div>

		<div th:replace="fragments_others_menu" :: menu></div>

		<div class="main-content">
			<div class="page-content">
				<div class="container-fluid">
					<div class="row">
						<div class="col-12">
							<div
								class="page-title-box d-sm-flex align-items-center justify-content-between">
								<h4 class="mb-sm-0"></h4>

								<div class="page-title-right">
									<ol class="breadcrumb m-0">
										<li class="breadcrumb-item"><a
											href="javascript: void(0);">Dashboard</a></li>
										<li class="breadcrumb-item active">View Mapped Users</li>
									</ol>
								</div>

							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-lg-12">
							<div class="card">
								<div class="card-header bg-primary pb-2 pt-2">
									<div class="d-flex justify-content-between">
										<h4 class="card-title text-white mb-0 pt-2 ">View Mapped
											Users</h4>
									</div>
								</div>
								<div class="card-body">
									<div id="suspectedAadhaar">
										<form class="needs-validation" th:action="@{/mappingOfSubAua}"
											th:object="${UsersRoleMapping}" method="GET">
											<!-- <input type="hidden" th:text="${srno}" id="srno"> -->
											<div class="alert alert-primary" role="alert"
												th:text="${success}" th:if="${success}"></div>
											<div class="alert alert-danger" role="alert"
												th:text="${error}" th:if="${error}"></div>
											<div class="table-responsive table-card1 mt-4 mb-1">
												<table id="example" class="table table-striped"
													style="width: 100%">

													<thead class="alert-info ">

														<tr>
															<th>S.NO</th>
															<th>SSO ID</th>
															<th>USER NAME</th>
															<th>DESIGNATION</th>
															<th>ROLE</th>
															<th>SUBAUA NAME</th>
															<th>STATUS</th>
															<th>CREATED BY</th>
															<th>CREATED ON</th>
															<th>DE-ACTIVE</th>

														</tr>
													</thead>
													<tbody class="list form-check-all ">
														<tr th:each="dataVal,iterator  : ${details}">
															<!-- <td th:text="${iterator.index+1}" >S.no</td> -->
															<td class="reasons" th:text="${dataVal.srno}">S.NO</td>
															<td class="reasons" th:text="${dataVal.SSOID}">SSO
																ID</td>
															<td class="reasons" th:text="${dataVal.displayName}">USER
																NAME</td>
															<td class="nooftransaction"
																th:text="${dataVal.designation}">DESIGNATION</td>
															<td class="nooftransaction"
																th:text="${dataVal.user_roles}">ROLE</td>
															<td class="reasons" th:text="${dataVal.subauaname}">SUBAUA
																NAME</td>
															<td class="Status" th:text="${dataVal.status}">STATUS</td>
														<!-- <td>	<div th:switch="true">
																<div th:case="${dataVal.status}=='1'" class="status" id="Active">Active</div>
																<div th:case="${dataVal.status}=='0'" class="status" id="De-Active">De-Active</div>
																
															</div></td> -->
															<td class="reasons"
																th:text="${dataVal.creater_aua_ssoid}">CREATED BY</td>
															<td class="Status" th:text="${dataVal.CREATED_DATE}">CREATED
																ON</td>
															<td><a class="btn btn-danger edit"><i class="ri-share-circle-line"></i> </a></td>
														</tr>

													</tbody>
													<tfoot class="alert-info">
														<tr>
															<th>S.NO</th>
															<th>SSO ID</th>
															<th>USER NAME</th>
															<th>DESIGNATION</th>
															<th>ROLE</th>
															<th>SUBAUA NAME</th>
															<th>STATUS</th>
															<th>CREATED BY</th>
															<th>CREATED ON</th>
															<th>DE-ACTIVE</th>
														</tr>
													</tfoot>
												</table>
											</div>
										</form>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

			</div>
		</div>



		<button onclick="topFunction()" class="btn btn-danger btn-icon"
			id="back-to-top">
			<i class="ri-arrow-up-line"></i>
		</button>
		<script src="assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
		<script src="assets/libs/feather-icons/feather.min.js"></script>
		<script type='text/javascript'
			src='assets/libs/flatpickr/flatpickr.min.js'></script>
		<script src="assets/js/jquery-3.5.1.js"></script>
		<script src="assets/js/jquery.dataTables.min.js"></script>
		<script src="assets/js/dataTables.bootstrap5.min.js"></script>
		<script type="text/javascript"
			src="assets/js/dataTables.fixedHeader.min.js"></script>
		<script type="text/javascript"
			src="assets/js/dataTables.buttons.min.js"></script>
		<script type="text/javascript" src="assets/js/jszip.min.js"></script>
		<script type="text/javascript" src="assets/js/buttons.html5.min.js"></script>
		<script src="assets/js/app.js"></script>
		<script>
			//jQuery.noConflict();
			//$.noConflict();
			var mybutton = document.getElementById("back-to-top");
			function scrollFunction() {
				100 < document.body.scrollTop
						|| 100 < document.documentElement.scrollTop ? (mybutton.style.display = "block")
						: (mybutton.style.display = "none");
			}
			function topFunction() {
				(document.body.scrollTop = 0),
						(document.documentElement.scrollTop = 0);
			}
			window.onscroll = function() {
				scrollFunction();
			};
		</script>
		<script>
			flatpickr("#fromdate", {
				maxDate : "today",
				enableTime : true,
				dateFormat : "d/m/y H:i"
			});
		</script>
		<script>
			flatpickr("#Enddate", {
				maxDate : "today",
				enableTime : true,
				dateFormat : "d/m/y H:i"
			});
		</script>
		<script type="text/javascript">
			$(document).ready(
					function() {
						var sPageURL = window.location.search.substring(1);
						var sURLVariables = sPageURL.split('&');

						$('#example').DataTable(
								{
									"pageLength" : 50,
									responsive : true,
									lengthMenu : [ [ 50, 100, 200, 500, -1 ],
											[ 50, 100, 200, 500, 'All' ], ],

									dom : 'Bfrtip',
									buttons : [ 'pageLength', 'csv', 'excel' ],

									fixedHeader : {
										// header: true,
										footer : true,
									},

								});
					});
			$(".edit")
					.click(
							function() {
								debugger;

								 /* 	var status = $(".status").val();  */
								var srno = $(this).closest('tr').find(
										'td:nth-child(1)').text();
								 var status = $(this).closest('tr').find(
										'td:nth-child(7)').text(); 

								console.log(srno);
								console.log(status);
								var search = {
									"srno" : srno,
									"status" : status
								}

								if (status =='ACTIVE') {
									if (confirm('Do you want to change the status of the user?')) {
										status = 0;

									}
								} else {
									alert("Status is already deactivated")
									event.preventDefault();

									console.log(status);
								} /* else {
																													status = 1;
																													console.log(status);
																												}  */

								$.ajax({
									url : "/Authmis/getsubauaCode?status=" + status
											+ "&srno= " + srno + " ",
									dataType : 'json',
									type : 'GET',
									success : function(data) {

									},
									fail : function() {
										event.preventDefault();
									}

								});

								window.location.reload(true);

							})
		</script>
</body>
<script type="text/javascript">
	/* function clicked() {
		debugger;

		if (confirm('Do you want to map?')) {
			yourformelement.submit();
		} else {
			event.preventDefault();
		}
	} */

	function save() {
		var SUB_AUA_CODE = $(this).closest('tr').find('td:nth-child(2)').text();
		console.log(SUB_AUA_CODE);
		var REQUEST_TYPE1 = $(this).closest('tr').find('td:nth-child(8)')
				.text();

		$.ajax({
			type : "post",
			contentType : "application/json",
			data : JSON.stringify("1"),
			url : endpoint,
			asynch : false,
			success : function() {
				alert("success");
			}

		});

		console.log(REQUEST_TYPE1);
	}
</script>
<!-- <style>
div.suspectedAadhaar {
	background-color: #333;
	overflow: auto;
	white-space: nowrap;
}

div.suspectedAadhaar table {
	display: inline-block;
	color: white;
	text-align: center;
	padding: 14px;
	text-decoration: none;
}

div.suspectedAadhaar table:hover {
	background-color: #777;
}
</style> -->
<!-- <style> 
#suspectedAadhaar {
background-color: lightblue;
border: 1px solid black;
height: 100px;
width: 500px;
overflow-x: scroll;
}
table {
width: 1000px;
margin: 10px;
}
</style> -->
</html>